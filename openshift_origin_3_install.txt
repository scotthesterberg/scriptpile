#setup vm user as described in openstack user change script

yum install -y updates && reboot

#setup resolve
echo “; generated by /usr/sbin/dhclient-script
search partshop.lab24.co lab24.co 
nameserver 10.0.13.10
nameserver 10.0.13.31
nameserver 8.8.8.8” >> /etc/resolv.conf

#set hostname
echo $(hostname -s)".partshop.lab24.co" >> /etc/hostname

yum install -y epel-release
yum install wget tar atop git vim system-storage-manager

wget https://github.com/openshift/origin/releases/download/v1.0.0/openshift-origin-v1.0.0-67617dd-linux-amd64.tar.gz &

# pre-reqs for open shift, need to download 1.8 unusable for alternate source due to 1.9 issues
yum install -y rubygem-thor rubygem-parseconfig util-linux https://kojipkgs.fedoraproject.org//packages/ansible/1.8.4/1.el7/noarch/ansible-1.8.4-1.el7.noarch.rpm &

tar -xzf openshift-origin-v1.0.0-67617dd-linux-amd64.tar.gz

git clone https://github.com/openshift/openshift-ansible.git
cd openshift-ansible


mv /etc/ansible/hosts /etc/ansible/hosts.bk
vim /etc/ansible/hosts 
### add below to ansible hosts
# This is an example of a bring your own (byo) host inventory

# Create an OSEv3 group that contains the masters and nodes groups
[OSv3:children]
masters
nodes

# Set variables common for all OSEv3 hosts
[OSv3:vars]
# SSH user, this user should allow ssh based auth without requiring a password
ansible_ssh_user=root

# If ansible_ssh_user is not root, ansible_sudo must be set to true
#ansible_sudo=true

deployment_type=origin

# host group for masters
[masters]
oso3-allinone.partshop.lab24.co

# host group for nodes
[nodes]
#oso3-node[1:2].partshop.lab24.co
################


#### the below needs to run successfully
ansible-playbook playbooks/byo/config.yml



 


